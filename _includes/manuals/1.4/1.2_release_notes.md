## Release notes for {{page.version}}

### Headline features

### Upgrade notes

#### New unattended_url setting

A new setting has been added which controls the URL used in provisioning templates to refer to the Foreman server.  This complements the existing foreman_url setting, which is now used to control the URL for users accessing the Foreman web interface.

Ensure this is correct under *More > Settings > Provisioning > unattended_url*, it should refer to the hostname of the Foreman server and is usually HTTP (even if users access Foreman over HTTPS).

#### User group membership cycles

Previous versions of foreman allowed you to set cycles between groups. It is no longer supported and it would cause errors in 1.4 so before upgrading you must remove all cyclic memberships. A cycle membership (indefinite loop) example is user group A has user group B as a member and user group B has user group A as a member at the same time. Note that cycles can have more levels (e.g. A -> B -> C -> A).

### Release notes for 1.4.0

#### API
* Remove unused show actions from controllers after old API removal (#2986)
* Add available images and IAM information to images API (#3101)
* Add validation to OS families on partition tables, installation media (#2818)
* Fix error message when API authentication fails (#2855)
* Fix API documentation for host compute resource parameters (#2951)
* Add API for importing of Puppet classes from proxies (`import_puppetclasses`) (#3140)
* Add API for orchestration tasks at /api/orchestration/id/tasks (#3566)
* Invalid JSON uploaded now returns an error message instead of 500 error (#3587)
* APIv2: remove the additional root node for child objects (#3768)
* APIv2: show errors when parent object doesn't exist for nested route (#3137)
* APIv2: provide metadata for pagination in collection responses (#3018)
* APIv2: change default collections root node name to "results", configurable via root_name parameter (#3011)
* APIv2: remove default single root node name, configurable via root_name parameter (#3646)
* APIv2: add *_name attribute for each *_id (#2931)
* APIv2: separate internal controllers from APIv1 (#3017)
* Allow API version to be specified in URL via /api/v1 or /api/v2 (#3020)
* Fix 500 error thrown for /api/users/loginname (#3736)

#### Authentication and Authorization
* Add support for mod_auth_kerb using `authorize_login_delegation_auth_source_user_autocreate` setting (#3312)
* Fix users being created automatically from LDAP when auto creation is disabled (#3493)

#### CLI
* Add power status and management commands for hosts (#3594)
* Fix architecture and organization add_* sub-command errors (#3555)
* Fix "undefined method 'index'" when setting global parameters (#3473)
* Fix specifying of secondary interfaces for bare metal hosts (#3713)
* Fix description of domain full name/description field (#3518)
* Allow plugins to remove existing commands (#3716)
* Fix error when invalid parameters are specified (#3742)
* Show IDs of resources when creating objects (#3246)
* Fix Gemfiles and cleanup (#3215)

#### Compute resources and Hosts creation
* Add `use_shortname_for_vms` setting to use short hostnames for VM names (#2975)
* Add NIC model selection for creation of VMware VMs (#3116)
* Disable fields that can't be edited during VM host edit (#3338)
* Fix behavior of host creation form when cloning VMware host (#3134)
* Fix IP address suggestion and remove host name when cloning hosts (#3136)
* Allow dash-separated MAC addresses (#3170)
* Fix storage volume error when cloning libvirt hosts (#3177)
* Remove requirement for IP address when creating host in some circumstances (#3182)
* Template URL tokens enabled by default (#3196)
* Prevent browser port being used in template URLs, add unattended_url setting (#3569)
* Add PXEGrub local boot template (#3737)

#### Proxy and Services
* Proxy features list can be refreshed from Foreman's UI and API (#1244)
* Add :puppet_user setting to set user for MCollective or puppet kick commands (#3150)
* Add Chef support for proxying facts and reports to Foreman (#3699)
* Add support to trigger Puppet runs over SSH (#3047)
* Add support to trigger Puppet runs over SaltStack (#3732)

#### Facts and Importers
* Report importer refactored into separate class (#3205)
* Add create_new_host_when_report_is_uploaded setting to disable host creation when report received (#3364)

#### Installer and packaging
* Use foreman-rake in default cronjobs (#3250)
* foreman-gce RPM added for Google Compute Engine (GCE) support (#3050)
* Remove libvirtd dependency from rubygem-ruby-libvirt/foreman-libvirt (#3344)
* Add console rake task, so "foreman-rake console" loads Rails console (#3347)
* Update foreman-cli package to install Hammer CLI (#3495)
* Add facter to bundler group for source installs (#3568)
* `foreman-installer --no-colors` now respected (#3238)
* foreman module changes:
   * foreman() parser function docs updated, added per_page option
* puppet module enhancements:
   * add cron_cmd parameter, use runinterval for cron timing
   * add server_certname, classfile parameters
   * switch to concat for building puppet.conf
* Support short switches and space separators in installer config options (#3244)

#### Internationalization
* Fix some untranslated validation error messages (#3248)
* Add Zanata support for translations (#3672)

#### Puppet and Puppet integration
* Puppet master and Puppet CA proxies assigned to hosts created via Puppet runs (#1830)
* Add :puppetuser setting to node.rb to run script as another user (#3543)

#### Web Interface
* Add two pane UI for adding and editing objects (#3254)
* Enable host group searching on reports (#3094)
* Add FreeBSD logo to host list (#3168)
* Add full screen edit mode to provisioning template editor (#3274)
* Add categorized list of permissions to role edit page (#3279)
* Add plugin tab to About page to list currently installed plugins (#3510)
* New menu design allowing plugins to register and extend it (#3510)
* Fix URL generation for various resources that were affected by multi-byte and / characters (#3516)
* Sort host groups alphabetically in list (#3107)
* Link to web site manual instead of wiki pages (#2763)
* Change cancel link from host edit to return to the host details page (#3661)
* IDs added to UI elements to improve test automation (#3684)

#### VM management
* Add MAC address and memory in MB to VMware listing (#3123)
* Display free and available space in VMware datastores (#3683)

#### Various fixes and features
* Rails 2 syntax changed to Rails 3 style (#2741)
* Automatically strip leading and trailing whitespace from object names (#3091)
* Remove unused columns from user and user role tables (#3144)
* Improve regexes used in validations (#3249)
* foreman_url setting now defaults to FQDN, not foreman.domain (#3210)
* Improve smart proxy class SQL and whitepsace (#3578)
* 'rr' dependency removed (#3597)
* Enable auditing for partition tables (#3673)
* Fix DB migration when plugin overrides the user model (#3669)
* Add FreeBSD operating system provisioning support via mfsbsd (#2572)
* Load smart proxy features dynamically, so plugins can extend them (#3622)
* Fix settings deletion message in development mode (#3777)
* Change "RedHat" name to "Kickstart" in default partition tables (#3722)
* Fix various brand names in UI text (#3724)
* Fix output of exception:codes rake task (#3637)

*A full list of changes in 1.4.0 is available via [Redmine](http://projects.theforeman.org/rb/release/2)*

### Contributors

We'd like to thank the following people who contributed to the Foreman {{page.version}} release:


As well as all users who helped test releases, report bugs and provide feedback on the project.

